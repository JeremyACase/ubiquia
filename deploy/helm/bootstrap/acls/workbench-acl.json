{
  "domain": "ubiquia-workbench",
  "version": {
    "major": 1,
    "minor": 1,
    "patch": 0
  },
  "modelType": "AgentCommunicationLanguage",
  "jsonSchema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Ubiquia Workbench",
    "type": "object",
    "definitions": {
      "SemanticVersion": {
        "description": "Semantic version object reused across models.",
        "type": "object",
        "required": [
          "major",
          "minor",
          "patch"
        ],
        "properties": {
          "major": {
            "type": "integer",
            "minimum": 0
          },
          "minor": {
            "type": "integer",
            "minimum": 0
          },
          "patch": {
            "type": "integer",
            "minimum": 0
          }
        },
        "additionalProperties": false
      },
      "BeliefStateGeneration": {
        "description": "Top-level object describing which belief state to generate/deploy.",
        "type": "object",
        "required": [
          "domainName",
          "version",
          "modelType"
        ],
        "properties": {
          "modelType": {
            "type": "string",
            "const": "BeliefStateGeneration",
            "default": "BeliefStateGeneration",
            "description": "Discriminator for this model type."
          },
          "domainName": {
            "type": "string",
            "maxLength": 120,
            "pattern": "^[a-zA-Z][a-zA-Z0-9\\-_.]{1,119}$",
            "description": "Domain namespace of the belief state (mirrors Java @NotNull String)."
          },
          "version": {
            "$ref": "#/definitions/SemanticVersion"
          }
        },
        "additionalProperties": false,
        "examples": [
          {
            "modelType": "BeliefStateGeneration",
            "domainName": "pets",
            "version": {
              "major": 1,
              "minor": 2,
              "patch": 3
            }
          }
        ]
      },
      "UserPrompt": {
        "description": "User prompt from Workbench UI.",
        "type": "object",
        "required": [
          "userPrompt"
        ],
        "properties": {
          "userPrompt": {
            "type": "string",
            "maxLength": 2000,
            "description": "The natural-language prompt to send to the LLM."
          }
        },
        "additionalProperties": false
      },
      "LlamaInput": {
        "description": "Input payload for a Llama model request.",
        "type": "object",
        "required": [
          "model",
          "prompt"
        ],
        "properties": {
          "model": {
            "type": "string",
            "description": "The model identifier to invoke."
          },
          "stream": {
            "type": "boolean",
            "description": "Whether to stream output tokens."
          },
          "prompt": {
            "type": "string",
            "maxLength": 300000,
            "description": "The natural-language prompt to send to the LLM."
          }
        },
        "additionalProperties": true
      },
      "LlamaOutput": {
        "description": "Output from Llama LLM.",
        "type": "object",
        "properties": {
          "model": {
            "type": "string",
            "minLength": 1
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "prompt": {
            "type": "string",
            "maxLength": 300000,
            "description": "The natural-language prompt to send to the LLM."
          },
          "response": {
            "type": "string",
            "minLength": 1,
            "contentMediaType": "application/json"
          },
          "done": {
            "type": "boolean"
          },
          "done_reason": {
            "type": "string"
          },
          "context": {
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 0
            }
          }
        },
        "additionalProperties": false
      },
      "JsonSchema": {
        "description": "A JSON Schema Draft-07 document (object/boolean) or a string containing such a schema.",
        "type": [
          "object",
          "boolean",
          "string"
        ],
        "minLength": 2,
        "maxLength": 200000
      },
      "PythonScriptPayload": {
        "description": "Payload carrying a full Python script to be written to disk and exposed at a REST endpoint.",
        "type": "object",
        "required": [
          "filename",
          "script"
        ],
        "properties": {
          "filename": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "pattern": "^[A-Za-z0-9._\\-\\/]+\\.py$"
          },
          "script": {
            "type": "string",
            "minLength": 1,
            "maxLength": 1000000,
            "contentMediaType": "text/x-python"
          }
        },
        "additionalProperties": false
      },
      "GeneratedAgentCommunicationLanguage": {
        "description": "Top-level ACL model.",
        "type": "object",
        "required": [
          "domain",
          "version",
          "jsonSchema"
        ],
        "properties": {
          "domain": {
            "type": "string",
            "maxLength": 120,
            "pattern": "^[a-zA-Z][a-zA-Z0-9\\-_.]{1,119}$"
          },
          "version": {
            "$ref": "#/definitions/SemanticVersion"
          },
          "jsonSchema": {
            "$ref": "#/definitions/JsonSchema"
          }
        }
      },
      "IngressResponse": {
        "description": "Generic ingress acknowledgement/response wrapper.",
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1,
            "description": "Server-generated identifier (e.g., UUID)."
          },
          "modelType": {
            "type": "string",
            "const": "IngressResponse",
            "default": "IngressResponse",
            "description": "Discriminator for this model."
          },
          "payloadModelType": {
            "type": "string",
            "minLength": 1,
            "default": "IngressResponse",
            "description": "Discriminator indicating the payload model type acknowledged by this response."
          }
        },
        "additionalProperties": false,
        "examples": [
          {
            "id": "2f8b6a6e-3b0d-4a3a-ae6e-3a9f7f5b2d1e",
            "modelType": "IngressResponse",
            "payloadModelType": "GeneratedAgentCommunicationLanguage"
          }
        ]
      },
      "MermaidDag": {
        "description": "A raw Mermaid diagram definition string used to visualize DAGs in Workbench UI.",
        "type": "string",
        "minLength": 5,
        "maxLength": 500000,
        "contentMediaType": "text/vnd.mermaid"
      }
    },
    "properties": {
      "beliefStateGeneration": {
        "$ref": "#/definitions/BeliefStateGeneration",
        "description": "Top-level Belief State Generation object."
      },
      "acl": {
        "$ref": "#/definitions/GeneratedAgentCommunicationLanguage"
      },
      "llamaInput": {
        "$ref": "#/definitions/LlamaInput"
      },
      "llamaOutput": {
        "$ref": "#/definitions/LlamaOutput"
      },
      "pythonScript": {
        "$ref": "#/definitions/PythonScriptPayload"
      },
      "ingressResponse": {
        "$ref": "#/definitions/IngressResponse",
        "description": "Top-level IngressResponse object."
      },
      "mermaidDag": {
        "$ref": "#/definitions/MermaidDag",
        "description": "Top-level Mermaid DAG string."
      }
    }
  }
}