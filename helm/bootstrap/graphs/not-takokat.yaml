name: NotTakokat
modelType: Graph
author: Jeremy Case
description: A DAG that definitely isn't TAKOKAT.

# Graphs require semantic versions
version:
  major: 1
  minor: 2
  patch: 3

tags:

capabilities:

agentCommunicationLanguage:
  name: udl
  version:
    major: 1
    minor: 2
    patch: 3

components:

  - name: Not-Senpai

    componentType: TEMPLATE
    modelType: Component
    description: SENPAI!

    communicationServiceSettings:
      exposeViaCommService: false

    port: 5000

    image:
      registry: ubiquia
      repository: pet-store-data-transform
      tag: latest

    adapter:
      modelType: Adapter
      adapterType: PUSH
      name: Not-Senpai-Adapter
      description: SENPAI!

      communicationServiceSettings:
        exposeViaCommService: true

      endpoint: /senpai

      inputSubSchemas:
        - modelName: SkyImagery_Ingest

      outputSubSchema:
        modelName: EOObservation_Full
      
      adapterSettings:
        persistInputPayload: true
        persistOutputPayload: true
        validateOutputPayload: false
        validateInputPayload: false
        stimulateInputPayload: true

  - name: Not-Takokat-Eoobs-Builder

    componentType: TEMPLATE
    modelType: Component
    description: SENPAI!
    port: 5000

    image:
      registry: ubiquia
      repository: pet-store-data-transform
      tag: latest

    adapter:
      modelType: Adapter
      adapterType: HIDDEN
      name: Not-Takokat-Eoobs-Builder-Adapter
      description: Senpai!

      endpoint: /do-stuff

      inputSubSchemas:
        - modelName: EOObservation_Full

      outputSubSchema:
        modelName: EOObservation_Full

      adapterSettings:
        persistInputPayload: true
        persistOutputPayload: true
        validateOutputPayload: false
        validateInputPayload: false

  - name: Not-Takokat-Object-Association

    componentType: TEMPLATE
    modelType: Component
    description: SENPAI!
    port: 5000

    image:
      registry: ubiquia
      repository: pet-store-data-transform
      tag: latest

    adapter:
      modelType: Adapter
      adapterType: HIDDEN
      name: Not-Takokat-Object-Association-Adapter
      description: Senpai!

      endpoint: /do-stuff

      inputSubSchemas:
        - modelName: EOObservation_Full

      outputSubSchema:
        modelName: EOObservation_Full

      adapterSettings:
        persistInputPayload: true
        persistOutputPayload: true
        validateOutputPayload: false
        validateInputPayload: false  

  - name: Not-Takokat-Object-Correlation

    componentType: TEMPLATE
    modelType: Component
    description: SENPAI!
    port: 5000

    image:
      registry: ubiquia
      repository: pet-store-data-transform
      tag: latest

    adapter:
      modelType: Adapter
      adapterType: HIDDEN
      name: Not-Takokat-Object-Correlation-Adapter
      description: Senpai!

      endpoint: /do-stuff

      inputSubSchemas:
        - modelName: EOObservation_Full

      outputSubSchema:
        modelName: EOObservation_Full

      adapterSettings:
        persistInputPayload: true
        persistOutputPayload: true
        validateOutputPayload: false
        validateInputPayload: false  

componentlessAdapters:

  - modelType: Adapter
    adapterType: EGRESS
    name: Not-Takokat-Post-Adapter
    description: SENPAI!

    endpoint: http://udl-belief-state-1-2-3:8080/ubiquia/belief-state-service/EOObservation_Full/add

    inputSubSchemas:
      - modelName: EOObservation_Full

    egressSettings:
      httpOutputType: POST
      egressType: SYNCHRONOUS
      egressConcurrency: 1

    adapterSettings:
      persistInputPayload: true
      persistOutputPayload: true
      validateOutputPayload: false
      validateInputPayload: false

edges:
  - leftAdapterName: Not-Senpai-Adapter
    rightAdapterNames:
      - Not-Takokat-Eoobs-Builder-Adapter
  - leftAdapterName: Not-Takokat-Eoobs-Builder-Adapter
    rightAdapterNames:
      - Not-Takokat-Object-Association-Adapter
  - leftAdapterName: Not-Takokat-Object-Association-Adapter
    rightAdapterNames:
      - Not-Takokat-Object-Correlation-Adapter
  - leftAdapterName: Not-Takokat-Object-Correlation-Adapter
    rightAdapterNames:
      - Not-Takokat-Post-Adapter
