# Architecture Decision Record: JSON Data Interchange

## Decision
Ubiquia will use JSON as the data interchange format between Ubiquia services unless specific performance bottlenecks necessitate otherwise.

## Status 

### [1.0.0] - 2025-07-01
- Accepted.

## Summary 

### Pros
- Simple, human-readable
- Usable by devs who are not software engineers

### Cons
- Extra load on the network (compared to other technologies)

### Alternatives
- gRPC (Protocol Buffers)
- BSON
- MessagePack

## Context

There are many ways for computer services at all levels of abstractions to communicate. Many of these are still in use even as they have fallen out of fashion (e.g., SOAP, XML, etc.) These communication formats are variously known as "data interchange formats", "protocols", or "standards" depending on the context.

The relentless march of technology has resulted in a proliferation of these technologies over time as various technologies have been created to address shortcomings (whether perceived or not) in other technologies. 

One such technology has become the "de facto" general-purpose interchange format: JavaScript Object Notation (JSON.) It represents an elegant compromise between several tradeoffs: flexibility, ubiquity, potential for optimization, and especially human-readability.

It is these last three traits which make it especially useful for Ubiquia. Because it is both ubiquitous and human readable, Ubiquia clients can easily integrate with it. For example, data contracts--commonly known known as Application Programming Interfaces (APIs)--can be exposed to clients using libraries such as OpenAPI.

And because JSON is flexible, it is also easily-optimized on an "as-needed" basis. For example, JSON is frequently "minified" in production settings so that it sends as little network traffic as possible; there are tools abound that can readily do this. Similarly, when in "development," such tools can be toggled off to allow devs the ability to diagnose and debug friendly, human-readable code.

Finally--importantly--JSON data structures can be defined using JSON schemas. Both structures and schemas are JSON and thus can be generated via a legion of tools and technologies such as Swagger. Swagger itself allows for developers to define "extensions" to the generation process so that developers can add to either or both the data structures or the schemas.


## Consequences & Tradeoffs
JSON can be juxtaposed with analogous technologies like Google's "gRPC" technology, itself generated by a tool called "Protocol Buffers."

While faster than JSON (because gRPC transmits packed bytes instead of strings), it is also less flexible, less ubiquitous, and less readable. It also requires Protocol Buffer files to generate the resulting gRPC code, and requires a paradigm shift in how clients communicate with servers (i.e., via Remote Procedure Call--RPC--instead of RESTfully.)

gRPC is therefore harder to debug, harder to maintain, and implies a learning curve that JSON does not.

A requirement alien to the private sector is that Ubiquia must be able to survive armed conflicts with America's peer and/or near-peer adversaries. Implied in this requirement is that Ubiquia must be installable into Secure Compartmentalized Information Facilities (SCIF's.) By design, SCIFs are air-gapped; installing and/or troubleshooting software in their boundaries is often done without luxuries available in other settings. Therefore, a premium is placed on any technologies that can make diagnostics and troubleshooting easier within Ubiquia. 

This premium on human-readability comes at the expense of compute speed and network traffic. But in both cases, these can mitigated using "minification" tools, although even these tools will not allow JSON performance to reach parity with gRPC. 


## Contributors
- **Jeremy Case**: jeremycase@odysseyconsult.com